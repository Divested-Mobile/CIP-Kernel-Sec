description: keyctl_set_reqkey_keyring() leaks thread keyrings
references:
- https://lkml.org/lkml/2017/4/1/235
- https://lkml.org/lkml/2017/4/3/724
- https://bugzilla.redhat.com/show_bug.cgi?id=1442086
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-7472
- http://www.ubuntu.com/usn/usn-3314-1
- http://www.ubuntu.com/usn/usn-3312-1
- http://www.ubuntu.com/usn/usn-3312-2
- http://www.ubuntu.com/usn/usn-3361-1
- http://www.ubuntu.com/usn/usn-3422-1
- http://www.ubuntu.com/usn/usn-3422-2
- https://usn.ubuntu.com/usn/usn-3314-1
- https://usn.ubuntu.com/usn/usn-3312-1
- https://usn.ubuntu.com/usn/usn-3312-2
- https://usn.ubuntu.com/usn/usn-3361-1
- https://usn.ubuntu.com/usn/usn-3422-1
- https://usn.ubuntu.com/usn/usn-3422-2
- https://ubuntu.com/security/notices/USN-3314-1
- https://ubuntu.com/security/notices/USN-3312-1
- https://ubuntu.com/security/notices/USN-3312-2
- https://ubuntu.com/security/notices/USN-3361-1
- https://ubuntu.com/security/notices/USN-3422-1
- https://ubuntu.com/security/notices/USN-3422-2
comments:
  debian/carnil: |-
    'Fixes: d84f4f992cbd ("CRED: Inaugurate COW credentials")'
    which is first in 2.6.29-rc1
  ubuntu/jdstrand: |-
    android kernels (flo, goldfish, grouper, maguro, mako and manta) are
     not supported on the Ubuntu Touch 14.10 and earlier preview kernels
    linux-lts-saucy no longer receives official support
    linux-lts-quantal no longer receives official support
reporters:
- Eric Biggers
introduced-by:
  mainline: [d84f4f992cbd76e8f39c488cf0c5d123843923b1]
fixed-by:
  aosp/3.18: [6efda2501976288f10895834ba2782d0df093441]
  cip/4.4: [c9460fbceb2f3efa1d20050cdbffa51ec025745a]
  cip/4.4-rt: [c9460fbceb2f3efa1d20050cdbffa51ec025745a]
  cip/4.4-st: [c9460fbceb2f3efa1d20050cdbffa51ec025745a]
  debian/buster-security: ['version:debian/4.9.25-1']
  debian/jessie-security: ['patch:debian/3.16.43-1:bugfix/all/keys-fix-keyctl_set_reqkey_keyring-to-not-leak-threa.patch']
  debian/stretch-security: ['version:debian/4.9.25-1']
  mainline: [c9f838d104fed6f2f61d68164712e3204bf5271b]
  stable/3.10: [d19182e28cfd7ade11a71f1e8190fb7243ed4bf5]
  stable/3.12: [e5b32c157bdd74cb0b402506c647222e59c6c11c]
  stable/3.16: [f7ce1014bc5e4bb42d6b9f5afb308f59534067ea]
  stable/3.18: [6efda2501976288f10895834ba2782d0df093441]
  stable/3.2: [0ebd7208190d2f7b16fee3cea05665e212cebaab]
  stable/4.1: [a0f82864854a4511cd19f06436f0cf140fae2427]
  stable/4.10: [523ae2e9e39a83b16e016c745922f74a6b3b36d0]
  stable/4.4: [c9460fbceb2f3efa1d20050cdbffa51ec025745a]
  stable/4.9: [174a74dbca2ddc7269c265598399c000e5b9b870]
  ubuntu/xenial: [9f4376a4f5fc150a761223348e43d2f7505e2da0]
