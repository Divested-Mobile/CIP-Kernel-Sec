description: double-locking error in drivers/usb/dwc3/gadget.c may potentially cause
  a deadlock with f_hid
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-14763
- https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=072684e8c58d17e853f8e8b9f6d9ce2e58d2b036
- https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=c91815b596245fd7da349ecc43c8def670d2269e
- https://www.spinics.net/lists/linux-usb/msg167355.html
- https://www.spinics.net/lists/linux-usb/msg167393.html
comments:
  Debian-benh: |-
    Introduced in 4.10 by commit 15b8d9332b92 "usb: dwc3: gadget:
    giveback request if we can't kick it"
  Debian-carnil: |-
    The issue (as the CVE is bound the drivers/usb/dwc3/gadget.c)
    might be considered as fixed already solely by c91815b59624
    ("usb: dwc3: gadget: never call ->complete() from ->ep_queue()").
    There is a related commit 072684e8c58d ("USB: gadget: f_hid:
    fix deadlock in f_hidg_write()") only present in 5.1-rc3 and
    potential backports. The assignment seems though specific to
    c91815b59624.
reporters:
- Tuba Yavuz
fixed-by:
  linux-4.14.y: [59d3a952e4f3d505f9444e86db069081323351c7]
  mainline: [c91815b596245fd7da349ecc43c8def670d2269e]
