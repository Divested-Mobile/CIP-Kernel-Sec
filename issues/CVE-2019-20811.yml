description: 'net-sysfs: call dev_hold if kobject_init_and_add success'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-20811
- https://git.kernel.org/linus/a3e23f719f5c4a38ffb3d30c8d7632a4ed8ccd9e
- https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.0.6
- https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=a3e23f719f5c4a38ffb3d30c8d7632a4ed8ccd9e
comments:
  debian/bwh: |-
    The referenced commit is just one of several changes in this
    area, and I think we should take them all:
    d0d668371679 net: don't decrement kobj reference count on init failure
    a3e23f719f5c net-sysfs: call dev_hold if kobject_init_and_add success
    b8eb718348b8 net-sysfs: Fix reference count leak in rx|netdev_queue_add_kobject
    48a322b6f996 net-sysfs: fix netdev_queue_add_kobject() breakage
    e0b60903b434 net-sysfs: Call dev_hold always in netdev_queue_add_kobject
    ddd9b5e3e765 net-sysfs: Call dev_hold always in rx_queue_add_kobject
  wens: Introduced in v4.14-rc1. Fixed in v5.1-rc3. Does not seem critical though.
reporters:
- Yue Haibing
introduced-by:
  linux-3.16.y: [ed3286ed5ee31f024c86ce1bd0a8e4c2087c4c67]
  mainline: [d0d6683716791b2a2761a1bb025c613eb73da6c3]
fixed-by:
  linux-3.16.y: [1b75034a1bb506abcabb2c2f9d7360020a7e2c42]
  linux-4.14.y: [e331c9066901dfe40bea4647521b86e9fb9901bb]
  linux-4.19.y: [d9d215be3a3aa8b3638f2705826f52a7fb84cf24]
  linux-4.19.y-cip: [d9d215be3a3aa8b3638f2705826f52a7fb84cf24]
  linux-4.19.y-cip-rt: [d9d215be3a3aa8b3638f2705826f52a7fb84cf24]
  mainline: [a3e23f719f5c4a38ffb3d30c8d7632a4ed8ccd9e]
