description: 'net-sysfs: call dev_hold if kobject_init_and_add success'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-20811
- https://git.kernel.org/linus/a3e23f719f5c4a38ffb3d30c8d7632a4ed8ccd9e
- https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.0.6
- https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=a3e23f719f5c4a38ffb3d30c8d7632a4ed8ccd9e
- https://usn.ubuntu.com/usn/usn-4527-1
- https://ubuntu.com/security/notices/USN-4527-1
- https://www.cve.org/CVERecord?id=CVE-2019-20811
comments:
  debian/bwh: |-
    The referenced commit is just one of several changes in this
    area, and I think we should take them all:
    d0d668371679 net: don't decrement kobj reference count on init failure
    a3e23f719f5c net-sysfs: call dev_hold if kobject_init_and_add success
    b8eb718348b8 net-sysfs: Fix reference count leak in rx|netdev_queue_add_kobject
    48a322b6f996 net-sysfs: fix netdev_queue_add_kobject() breakage
    e0b60903b434 net-sysfs: Call dev_hold always in netdev_queue_add_kobject
    ddd9b5e3e765 net-sysfs: Call dev_hold always in rx_queue_add_kobject
  wens: Introduced in v4.14-rc1. Fixed in v5.1-rc3. Does not seem critical though.
reporters:
- Yue Haibing
introduced-by:
  mainline: [d0d6683716791b2a2761a1bb025c613eb73da6c3]
  stable/3.16: [ed3286ed5ee31f024c86ce1bd0a8e4c2087c4c67]
fixed-by:
  cip/4.19: [d9d215be3a3aa8b3638f2705826f52a7fb84cf24]
  cip/4.19-rt: [d9d215be3a3aa8b3638f2705826f52a7fb84cf24]
  debian/buster-security: ['version:debian/4.19.37-1']
  debian/jessie-security: ['version:debian/3.16.72-1']
  debian/stretch-security: ['patch:debian/4.9.210-1+deb9u1:bugfix/all/net-sysfs-call-dev_hold-if-kobject_init_and_add-succ.patch']
  mainline: [a3e23f719f5c4a38ffb3d30c8d7632a4ed8ccd9e]
  openela/4.14: [e331c9066901dfe40bea4647521b86e9fb9901bb]
  stable/3.16: [1b75034a1bb506abcabb2c2f9d7360020a7e2c42]
  stable/4.14: [e331c9066901dfe40bea4647521b86e9fb9901bb]
  stable/4.19: [d9d215be3a3aa8b3638f2705826f52a7fb84cf24]
  ubuntu/bionic: [abe43e588e8c7a04023e7a3f8f0bdaf8e9a99133]
  ubuntu/eoan: ['version:5.0.0-13.14']
  ubuntu/focal: ['version:5.4.0-9.12']
  ubuntu/groovy: ['version:5.4.0-26.30']
  ubuntu/xenial: [412c4bfcfb15af0e39f1ac6adbfe4ead423bd121]
