description: 'net: crypto set sk to NULL when af_alg_release.'
references:
- https://patchwork.ozlabs.org/patch/1042902/
- https://bugzilla.novell.com/show_bug.cgi?id=1125907
- https://bugzilla.novell.com/show_bug.cgi?id=1125907#c5
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-8912
- https://usn.ubuntu.com/usn/usn-3930-1
- https://usn.ubuntu.com/usn/usn-3930-2
- https://usn.ubuntu.com/usn/usn-3931-1
- https://usn.ubuntu.com/usn/usn-3931-2
- https://ubuntu.com/security/notices/USN-3930-1
- https://ubuntu.com/security/notices/USN-3930-2
- https://ubuntu.com/security/notices/USN-3931-1
- https://ubuntu.com/security/notices/USN-3931-2
- https://www.cve.org/CVERecord?id=CVE-2019-8912
comments:
  debian/carnil: |-
    This is a followup fix for
    6d8c50dcb029872b298eea68cc6209c866fd3e14 (4.18-rc1) which was
    CVE-2018-12232. CVE-2018-12232 was affecting only 4.10-rc1
    onwards, quoting the note in CVE-2018-12232.
    Issue introduced with 86741ec25462 ("net: core: Add a UID field
    to struct sock.").
    There might be a more generic follow-up as per
    https://patchwork.ozlabs.org/patch/1046478/
  ubuntu/tyhicks: |-
    NVD has published CVSS metrics that state that the attack vector is
     "Network" which results in a CRITICAL CVSS score but that does not match
     Ubuntu's assessment. The attack vector is "Local" since AF_ALG is a address
     family that strictly operates locally between a userspace process and the
     kernel crypto API and the attack requires a specific sequence of operations
     to be performed on the file descriptor that represents the socket.
    This has been addressed in a more generic manner, to fix
     other network families, by this commit in the net tree:
     https://git.kernel.org/pub/scm/linux/kernel/git/davem/net.git/commit/?id=ff7b11aa481f682e0e9711abfeb7d03f5cd612bf
introduced-by:
  mainline: [86741ec25462e4c8cdce6df2f41ead05568c7d5e]
fixed-by:
  aosp/3.18: [0437ea9b8fa626e9bbbd86067e5fc6ca38674065]
  cip/4.19: [eb5e6869125f69dd28513f92992d97ec62bb9773]
  cip/4.19-rt: [eb5e6869125f69dd28513f92992d97ec62bb9773]
  debian/buster-security: ['version:debian/4.19.28-1']
  mainline: [9060cb719e61b685ec0102574e10337fa5f445ea]
  stable/4.14: [6e4c01ee785c2192fcc4be234cedde3706309a7e]
  stable/4.19: [eb5e6869125f69dd28513f92992d97ec62bb9773]
  ubuntu/bionic: [b29b1a36a7da90988a0e4b494ec6e807e07eef44, 54cdde8dbf91fd466ae0ff769e5aca23ffba7c77]
