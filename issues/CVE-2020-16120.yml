description: incorrect unprivileged overlayfs permission checking
references:
- https://www.openwall.com/lists/oss-security/2020/10/13/6
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-16120
- https://usn.ubuntu.com/usn/usn-4578-1
- https://usn.ubuntu.com/usn/usn-4577-1
- https://usn.ubuntu.com/usn/usn-4576-1
- https://bugs.launchpad.net/bugs/1894980
comments:
  debian/carnil: |-
    Additionally to the three fixing commits
    130fdbc3d1f9966dd4230709c30f3768bccd3065 ("ovl: pass correct
    flags for opening real directory") and
    292f902a40c11f043a5ca1305a114da0e523eaa3 ("ovl: call secutiry
    hook in ovl_real_ioctl()") might be wanted (see oss-security
    post).
    Only exploitable when unprivileged user namespaces are enabled.
  ubuntu/sbeattie: |-
    this issue most likely only has an impact on Ubuntu systems
      as it is dependent on both unprivileged user namespaces being enabled
      as well as a non-upstream patch that allows overlayfs mounts in user
      namespaces.
reporters:
- Giuseppe Scrivano
fixed-by:
  mainline: [48bd024b8a40d73ad6b086de2615738da0c7004f, 56230d956739b9cb1cbde439d76227d77979a04d,
    05acefb4872dae89e772729efb194af754c877e8]
