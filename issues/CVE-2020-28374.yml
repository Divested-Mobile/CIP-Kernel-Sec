description: 'scsi: target: Fix XCOPY NAA identifier lookup'
references:
- https://www.openwall.com/lists/oss-security/2021/01/12/12
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-28374
- https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=2896c93811e39d63a4d9b63ccf12a8fbc226e5e4
- https://github.com/open-iscsi/tcmu-runner/pull/644
- https://usn.ubuntu.com/usn/usn-4694-1
comments:
  debian/carnil: |-
    Introduced with cbf031f425fd ("target: Add support for
    EXTENDED_COPY copy offload emulation") in 3.12-rc1.
  ubuntu/sbeattie: |-
    MITIGATION
      XCOPY support is enabled by default, but can be disabled via:
        echo 0 > /sys/kernel/config/target/core/<backstore>/<name>/attrib/emulate_3pc
      or
        targetcli /backstores/<backstore>/<name> set attribute emulate_3pc=0
      .
      This workaround does *not* affect XCOPY requests sent to tcmu-runner
      based backstores.
  wens: Introduced in v3.12-rc1; fixed in v5.11-rc4.
introduced-by:
  mainline: [cbf031f425fd0b30ff10ba83b612753189a6bbbf]
fixed-by:
  mainline: [2896c93811e39d63a4d9b63ccf12a8fbc226e5e4]
  stable/4.14: [c842ead67ae3cac58e84e7880153e68cccd59773]
  stable/4.19: [fff1180d24e68d697f98642d71444316036a81ff]
  stable/4.4: [87be50177ddb789330e6c5ddcc2f301cec0017dc]
  stable/4.9: [966e6d0786e64f4065b76116d7e9411c01761d30]
  stable/5.10: [6f1e88527c1869de08632efa2cc796e0131850dc]
  stable/5.4: [485e21729b1e1235e6075318225c09e76b376e81]
ignore:
  cip/4.19: No member enables TARGET_CORE
  cip/4.19-rt: No member enables TARGET_CORE
  cip/4.4: No member enables TARGET_CORE
