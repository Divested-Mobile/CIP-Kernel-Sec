description: A use-after-free bug was found in the netfilter
references:
- https://syzkaller.appspot.com/bug?id=0c4fd9c6aa04ec116d01e915d3b186f71a212cb2
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-36694
- https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=cc00bcaa589914096edef7fb87ca5cee4a166b5c
- https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.12
- https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.10
- https://www.cve.org/CVERecord?id=CVE-2020-36694
comments:
  debian/carnil: |-
    Originally fixed with cc00bcaa5899 ("netfilter: x_tables:
    Switch synchronization to RCU") in 5.10 but the patch was
    reverted with d3d40f237480 ("Revert "netfilter: x_tables:
    Switch synchronization to RCU"") in 5.12-rc5.
  masami: |-
    commit 80055da ("netfilter: x_tables: make xt_replace_table
    wait until old rules are not used anymore") was introduced
    in 4.15-rc1. Commit cc00bcaa5899 fixed this bug but it was
    reevrted by commit d3d40f237480 in 5.12-rc5.
    Commit 175e476 ("netfilter: x_tables: Use correct memory
    barriers.") fixes 7f5c6d4 ("netfilter: get rid of atomic
    ops in fast path") in 3.0-rc in 3.0-rc1.
introduced-by:
  mainline: [7f5c6d4f665bb57a19a34ce1fb16cc708c04f219]
fixed-by:
  cip/4.19: [81bc258370c6eeb1f41d350325e8a2c8e20fafad]
  cip/4.19-rt: [81bc258370c6eeb1f41d350325e8a2c8e20fafad]
  cip/4.4: [9bc6c1246941cf88cf06a27153d6a1108a240067]
  cip/4.4-rt: [9bc6c1246941cf88cf06a27153d6a1108a240067]
  cip/4.4-st: [9bc6c1246941cf88cf06a27153d6a1108a240067]
  cip/5.10: [3fdebc2d8e7965f946a3d716ffdd482e66c1f46c]
  cip/5.10-rt: [3fdebc2d8e7965f946a3d716ffdd482e66c1f46c]
  mainline: [175e476b8cdf2a4de7432583b49c871345e4f8a1]
  stable/4.14: [f1fd7a174018f1107881150c6c2ce00e49a1e643]
  stable/4.19: [81bc258370c6eeb1f41d350325e8a2c8e20fafad]
  stable/5.10: [3fdebc2d8e7965f946a3d716ffdd482e66c1f46c]
  stable/5.4: [19a5fb4ceada903e692de96b8aa8494179abbf0b]
  ubuntu/bionic: [d84a459a3aa2497f0deab0ceedae919272a80ea5]
  ubuntu/focal: [a88152f86ed701be02581e36fbd3abbc66a0c041]
  ubuntu/groovy: [66fdc61bf7278ff440791326e8c97e2b22406e71]
