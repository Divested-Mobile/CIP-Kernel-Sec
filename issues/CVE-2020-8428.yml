description: user-triggerable read-after-free crash or 1-bit infoleak oracle in open(2)
references:
- https://www.openwall.com/lists/oss-security/2020/01/28/2
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8428
- https://www.openwall.com/lists/oss-security/2020/02/02/1
- https://syzkaller.appspot.com/bug?extid=190005201ced78a74ad6
- https://usn.ubuntu.com/usn/usn-4318-1
- https://usn.ubuntu.com/usn/usn-4319-1
- https://usn.ubuntu.com/usn/usn-4320-1
- https://usn.ubuntu.com/usn/usn-4325-1
- https://usn.ubuntu.com/usn/usn-4324-1
comments:
  debian/carnil: |-
    The issue go introduced with 30aba6656f61 ("namei: allow
    restricted O_CREAT of FIFOs and regular files") in 4.19-rc1
    which got backported to 4.4.166, 4.9.142 and 4.14.85.
    Needs a regression update:
    https://lore.kernel.org/lkml/20200201162645.GJ23230@ZenIV.linux.org.uk/
    which is applied in mainline as 6404674acd59 ("vfs: fix
    do_last() regression"). See:
    https://syzkaller.appspot.com/bug?extid=190005201ced78a74ad6
  ubuntu: amurray| Original fix caused a regression so need second commit as well
reporters:
- Al Viro
introduced-by:
  cip/4.4: [3658ccbbac39cc634e357ee08ff46d0893cbc111]
  cip/4.4-rt: [3658ccbbac39cc634e357ee08ff46d0893cbc111]
  mainline: [30aba6656f61ed44cba445a3c0d38b296fa9e8f5]
  stable/3.16: [dc076c9a4580000773df6c64ad716f261baede30]
  stable/4.14: [7bcfd8f985f2c7bf7be6a08333dfaf31ed58ccd4]
  stable/4.4: [3658ccbbac39cc634e357ee08ff46d0893cbc111]
  stable/4.9: [0c41beebcdf9b0142eb774eae13352c76c9eea9f]
fixed-by:
  cip/4.19: [752f72edea55f9b7c6fd019e71365def13a0f2b6]
  cip/4.19-rt: [752f72edea55f9b7c6fd019e71365def13a0f2b6]
  cip/4.4: [0da89b1691602089be04e0c413567b7ce9582b21]
  cip/4.4-rt: [0da89b1691602089be04e0c413567b7ce9582b21]
  debian/buster-security: ['patch:debian/4.19.98-1+deb10u1:bugfix/all/do_last-fetch-directory-i_mode-and-i_uid-before-it-s.patch']
  debian/stretch-security: ['patch:debian/4.9.210-1+deb9u1:bugfix/all/do_last-fetch-directory-i_mode-and-i_uid-before-it-s.patch']
  mainline: [d0cb50185ae942b03c4327be322055d622dc79f6]
  stable/3.16: [c690e18e2e1c697b86767340e2b1b4d6fd62aaf8]
  stable/4.14: [778de9db9ec2036f0bd82572bbb7b35ec402089c]
  stable/4.19: [752f72edea55f9b7c6fd019e71365def13a0f2b6]
  stable/4.4: [0da89b1691602089be04e0c413567b7ce9582b21]
  stable/4.9: [51772996274874a6bccda05b827f92582ce7b565]
  stable/5.4: [454759886d0b463213fad0f1c733469e2c501ab9]
