description: Stack corruption bug in KVM on Power8 processors
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8834
- https://www.openwall.com/lists/oss-security/2020/04/06/2
- https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1867717
- https://ubuntu.com/security/notices/USN-4318-1
- https://www.cve.org/CVERecord?id=CVE-2020-8834
comments:
  debian/carnil: |-
    Introduced by f024ee098476 ("KVM: PPC: Book3S HV: Pull out TM
    state save/restore into separate procedures") in 4.8-rc1 and
    87a11bb6a7f7 ("KVM: PPC: Book3S HV: Work around XER[SO] bug in
    fake suspend mode") in 4.17-rc1.
  ubuntu/sbeattie: |-
    appears to only affect Power8 hardware and not Power9,
      possibly because transaction memory in Power9 needs a software assist
      to function.
    from reporter, introduced in f024ee098476 and exacerbated by
      87a11bb6a7f7.
    Addressed by:
      7b0e827c6970e8ca77c60ae87592204c39e41245 KVM: PPC: Book3S HV: Factor
        fake-suspend handling out of kvmppc_save/restore_tm
      009c872a8bc4d38f487a9bd62423d019e4322517 KVM: PPC: Book3S PR: Move
        kvmppc_save_tm/kvmppc_restore_tm to separate file
      6f597c6b63b6f3675914b5ec8fcd008a58678650 KVM: PPC: Book3S PR: Add
        guest MSR parameter for kvmppc_save_tm()/kvmppc_restore_tm()
reporters:
- Gustavo Romero
- Paul Mackerras
introduced-by:
  mainline: [f024ee098476a3e620232e4a78cfac505f121245, 87a11bb6a7f7d131bd2112f210eff780aa25b04c]
fixed-by:
  debian/buster-security: ['version:debian/4.18.6-1']
  mainline: [6f597c6b63b6f3675914b5ec8fcd008a58678650, 009c872a8bc4d38f487a9bd62423d019e4322517,
    7b0e827c6970e8ca77c60ae87592204c39e41245]
  ubuntu/bionic: [351ac5bbfbee700c337a80892671f8d3e81580d2, 46bef64602404ba2b2c9c212520601abd55a80db,
    69f4ee5c9dcf7708a59f62146b157dc27b70e4fd]
