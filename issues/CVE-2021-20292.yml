description: 'drm/ttm/nouveau: don''t call tt destroy callback on alloc failure.'
references:
- https://bugzilla.redhat.com/show_bug.cgi?id=1939686
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-20292
- https://git.kernel.org/linus/5de5b6ecf97a021f29403aa272cb4e03318ef586
- https://usn.ubuntu.com/usn/usn-4946-1
- https://ubuntu.com/security/notices/USN-4946-1
- https://ubuntu.com/security/notices/USN-5343-1
- https://www.cve.org/CVERecord?id=CVE-2021-20292
comments:
  debian/bwh: |-
    From my reading of the fix, the bug did not affect nouveau but
    all the other ttm-based drivers (amdgpu, qxl, radeon, virtgpu,
    and vmwgfx).  The fix is to make the API behave the way the
    other drivers expected it to, and change nouveau accordingly.
    This will create a potential memory leak in any OOT drivers
    that were using the API correctly.
  ubuntu/sbeattie: |-
    kernels with CONFIG_SLAB_FREELIST_HARDENED=y (which Ubuntu
      enables) are probably not affected.
  wens: Despite the title, nouveau is the only driver that doesn't suffer from this.
    Fixed in v5.9-rc1.
introduced-by:
  mainline: [8e7e70522d760c4ccd4cd370ebfa0ba69e006c6e]
fixed-by:
  cip/4.19: [10c8a526b2db1fcdf9e2d59d4885377b91939c55]
  cip/4.19-rt: [10c8a526b2db1fcdf9e2d59d4885377b91939c55]
  debian/buster-security: ['version:debian/4.19.146-1']
  debian/stretch-security: ['patch:debian/4.9.272-1:bugfix/all/drm-ttm-nouveau-don-t-call-tt-destroy-callback-on-al.patch']
  mainline: [5de5b6ecf97a021f29403aa272cb4e03318ef586]
  stable/4.14: [4a2cec066dc8d099d30c649ae7ed26771029e0b5]
  stable/4.19: [10c8a526b2db1fcdf9e2d59d4885377b91939c55]
  stable/4.9: [70f44dfbde027f444412cfb4ea9b485a4c1dec0e]
  stable/5.4: [c6d2ddf1a30d524106265ad2c48b907cd7a083d4]
  ubuntu/bionic: [9ade8f432db64783f606ef018a5c2595aa2a99c2]
  ubuntu/focal: [a16635ca6265a43d71c153308c2d69674a6b680b]
  ubuntu/groovy: [6e8933a21903ec956cabf7b3dba9890acef0ca83]
