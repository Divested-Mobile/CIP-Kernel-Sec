description: 'net/sctp: fix race condition in sctp_destroy_sock'
references:
- https://www.openwall.com/lists/oss-security/2021/04/18/2
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-23133
- https://git.kernel.org/pub/scm/linux/kernel/git/netdev/net-next.git/commit/?id=b166a20b07382b8bc1dcee2a448715c9c2c81b5b
- https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=b166a20b07382b8bc1dcee2a448715c9c2c81b5b
comments:
  debian/carnil: |-
    Commit fixes 610236587600 ("bpf: Add new cgroup attach type to
    enable sock modifications") in 4.10-rc1. Original fix
    b166a20b0738 ("net/sctp: fix race condition in
    sctp_destroy_sock") was reverted, as it caused a dead-lock, cf.
    01bfe5e8e428 ("Revert "net/sctp: fix race condition in
    sctp_destroy_sock"") and then fixed with 34e5b0118685 ("sctp:
    delay auto_asconf init until binding the first addr").
    Unclear yet if this is as well a problem for the 5.10.32,
    4.19.189 and 4.9.268 releases.
    The fix needs to be redone as well for all stable series which
    got the original patch applied.
  ubuntu/sbeattie: |-
    commit b166a20b0738 "net/sctp: fix race condition in
      sctp_destroy_sock" in net-next
  wens: Introduced in v4.10-rc1; fixed in v5.12-rc8.
reporters:
- Or Cohen
introduced-by:
  mainline: [61023658760032e97869b07d54be9681d2529e77]
fixed-by:
  mainline: [b166a20b07382b8bc1dcee2a448715c9c2c81b5b, 01bfe5e8e428b475982a98a46cca5755726f3f7f,
    34e5b01186858b36c4d7c87e1a025071e8e2401f]
