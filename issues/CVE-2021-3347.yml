description: UAF in futex
references:
- https://www.openwall.com/lists/oss-security/2021/01/29/1
- https://bugzilla.suse.com/show_bug.cgi?id=1181349
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-3347
comments:
  ubuntu: |-
    sbeattie| the commits with no breaks entries are prerequisite fixes for
      the final patch.
reporters:
- Marcus Meissner
introduced-by:
  mainline: [1b7558e457ed0de61023cfc913d2c342c7c3d9f2, c1e2f0eaf015fb7076d51a339011f2383e6dd389]
  stable/4.14: [1b7558e457ed0de61023cfc913d2c342c7c3d9f2, 1352130fe6aa4108fd6758687c419bb0d0c22f0d]
  stable/4.4: [1b7558e457ed0de61023cfc913d2c342c7c3d9f2, ad4740ceccfbf326b7f82ebac43d860a64240c1c]
  stable/4.9: [1b7558e457ed0de61023cfc913d2c342c7c3d9f2, 781691c797deefe41090e9f0c02e8fcb9fca4ccf]
fixed-by:
  debian/buster-security: ['patch:debian/4.19.171-1:bugfix/all/futex_Ensure_the_correct_return_value_from_futex_lock_pi_.patch',
    'patch:debian/4.19.171-1:bugfix/all/futex_Replace_pointless_printk_in_fixup_owner_.patch',
    'patch:debian/4.19.171-1:bugfix/all/futex_Provide_and_use_pi_state_update_owner_.patch',
    'patch:debian/4.19.171-1:bugfix/all/rtmutex_Remove_unused_argument_from_rt_mutex_proxy_unlock_.patch',
    'patch:debian/4.19.171-1:bugfix/all/futex_Use_pi_state_update_owner__in_put_pi_state_.patch',
    'patch:debian/4.19.171-1:bugfix/all/futex_Simplify_fixup_pi_state_owner_.patch',
    'patch:debian/4.19.171-1:bugfix/all/futex_Handle_faults_correctly_for_PI_futexes.patch']
  mainline: [12bb3f7f1b03d5913b3f9d4236a488aa7774dfe9, 04b79c55201f02ffd675e1231d731365e335c307,
    c5cade200ab9a2a3be9e7f32a752c8d86b502ec7, 2156ac1934166d6deb6cd0f6ffc4c1076ec63697,
    6ccc84f917d33312eb2846bd7b567639f585ad6d, f2dac39d93987f7de1e20b3988c8685523247ae2,
    34b1a1ce1458f50ef27c54e28eb9b1947012907a]
  stable/4.14: [29f2a64709209b253d6581f61601ef337b26d9d4, 7e27ef3c7cc6c230c391f68fe881ec39d76d1c72,
    6935461c6465d2b1ae030635ebe6ac1702e19e94, 348a99a76b07102475a7d4768de0e5a68851043e,
    51b7a7338bae3db42904ace1595061fb56b4de57, 52b71186bdc06a369045494264c4487e8e09aa41,
    50cfcc42dd1be7668ad37640657c7a156bbd0704]
  stable/4.19: [72f38fffa4758b878f819f8a47761b3f03443f36, f03b21494da1ebf4ecfcb34ab647f35dc7fb7d92,
    0e1501f7b1eea94991e60cc51fadb3838bb2c7cb, 29013e4f4b73e2f5ef39a443b05c231ac29c690f,
    9d5dbf57d66f410d35da822a115dfd57531950dc, a4649185a98eb7adbdbdfdbf61237d518861e877,
    6e7bfa046de83596c2a50f72e8ced1ee327db654]
  stable/5.10: [ab5e9a320e444fda64e5912f0e0f4f02021569ea, 5ede8ee2cb16f4dd066a37b38ad46576dbf20d45,
    5b2c5a9561c24f3bcdcb85bb897bdc3aa3375c49, 6d28ac502f9a0cf30d7ca2eeeefbf8a98c01fe82,
    a597f12e971c3859fdcc503a25008b37a891f043, abc4dd792f8db54470a888ca825166fbba59ee78,
    e843e4f782582a10e5077b917948d1df943070f6]
  stable/5.4: [0dae88a92596db9405fd4a341c1915cf7d8fbad4, 65aad57cac8db8dd0d1dcdd86bc8603039d937b7,
    015b6a4c2564a9385401a6105e80a20c333e1d44, ceb83cf9ed6764977c86a03fe187578def3b4e18,
    a3155c362ca0a4677d0c886798bbeb5f0a9efe86, 55ea172ce3ebe276e734352eb1b236b3065496c3,
    ecd62d2e9ab405d9575c3aa8eb44e44e523a0d19]
