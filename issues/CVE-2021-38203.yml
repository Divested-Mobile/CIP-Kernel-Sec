description: 'btrfs: fix deadlock with concurrent chunk allocations involving system
  chunks'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-38203
- https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.13.4
- https://github.com/torvalds/linux/commit/1cb3db1cf383a3c7dbda1aa0ce748b0958759947
- https://ubuntu.com/security/notices/USN-5096-1
- https://www.cve.org/CVERecord?id=CVE-2021-38203
comments:
  debian/bwh: |-
    The fix is precisely a revert of commit eafa4fd0ad0607, so I
    don't believe there is an older issue.
  debian/carnil: |-
    Commit fixes eafa4fd0ad0607 ("btrfs: fix exhaustion of the
    system chunk array due to concurrent allocations") but the
    underlying issue might be present earlier.
  masami: This CVE is introduced since v5.13-rc1.
reporters:
- Naohiro Aota
introduced-by:
  mainline: [eafa4fd0ad06074da8be4e28ff93b4dca9ffa407]
fixed-by:
  mainline: [1cb3db1cf383a3c7dbda1aa0ce748b0958759947]
  stable/5.13: [789b24d9950d3e67b227f81b3fab912a8fb257af]
  ubuntu/focal: ['version:5.4.0-9.12']
ignore:
  cip/4.19: Not affect on this version
  cip/4.19-rt: Not affect on this version
  cip/4.4: Not affect on this version
  cip/4.4-rt: Not affect on this version
  cip/5.10: Not affect on this version
