description: 'btrfs: fix abort logic in btrfs_replace_file_extents'
references:
- https://www.cve.org/CVERecord?id=CVE-2021-47433
- https://git.kernel.org/stable/c/0e32a2b85c7d92ece86c17dfef390c5ed79c6378
- https://git.kernel.org/stable/c/0e309e1152fc34ef75991d9d69b165dbf75bf26c
- https://git.kernel.org/stable/c/4afb912f439c4bc4e6a4f3e7547f2e69e354108f
- https://lore.kernel.org/linux-cve-announce/2024052235-CVE-2021-47433-659b@gregkh/
- https://git.kernel.org/linus/4afb912f439c4bc4e6a4f3e7547f2e69e354108f
comments:
  cip/cip-kernel-sec: There is no mention of the commit that introduced the bug in
    the CVE announcement. Fixed in v5.15-rc6.
  cip/masami: "Executing btrfs_abort_transaction in btrfs_replace_file_extents (old\
    \ name is \nbtrfs_punch_hole_range) was added by commit 690a5dbfc (\"Btrfs: fix\
    \ ENOSPC \nerrors, leading to transaction aborts, when cloning extents\") in 5.4-rc1."
  debian/carnil: First introducing commit could not be determined.
fixed-by:
  cip/5.10: [0e32a2b85c7d92ece86c17dfef390c5ed79c6378]
  cip/5.10-rt: [0e32a2b85c7d92ece86c17dfef390c5ed79c6378]
  mainline: [4afb912f439c4bc4e6a4f3e7547f2e69e354108f]
  stable/5.10: [0e32a2b85c7d92ece86c17dfef390c5ed79c6378]
ignore:
  cip/4.19: vulnerable function is not present
  cip/4.19-rt: vulnerable function is not present
  cip/4.4: vulnerable function is not present
  cip/4.4-rt: vulnerable function is not present
  cip/4.4-st: vulnerable function is not present
  stable/4.19: vulnerable function is not present
