description: 'io-wq: check for wq exit after adding new worker task_work'
references:
- https://www.cve.org/CVERecord?id=CVE-2021-47577
- https://git.kernel.org/stable/c/4b4e5bbf9386d4ec21d91c0cb0fd60b9bba778ec
- https://git.kernel.org/stable/c/71a85387546e50b1a37b0fa45dadcae3bfb35cf6
- https://lore.kernel.org/linux-cve-announce/2024061915-CVE-2021-47577-c4c7@gregkh/
comments:
  cip/cip-kernel-sec: There is no mention of the commit that introduced the bug in
    the CVE announcement.Fixed in v5.16-rc5.
  cip/masami: |-
    The IO_WQ was introduced by commit 771b53d0 ("io-wq: small threadpool
    implementation for io_uring") in 5.5-rc1. so that prior to 5.5 kernels
    are not affected. 5.10 was fixed by commit 788d0824 ("io_uring: 
    import 5.15-stable io_uring") when  sync io_uring code to 5.15.
  debian/carnil: First introducing commit could not be determined.
fixed-by:
  cip/5.10: [788d0824269bef539fe31a785b1517882eafed93]
  cip/5.10-rt: [788d0824269bef539fe31a785b1517882eafed93]
  mainline: [71a85387546e50b1a37b0fa45dadcae3bfb35cf6]
  stable/5.10: [788d0824269bef539fe31a785b1517882eafed93]
  stable/5.15: [4b4e5bbf9386d4ec21d91c0cb0fd60b9bba778ec]
ignore:
  cip/4.19: IO_WQ is not implemented
  cip/4.19-rt: IO_WQ is not implemented
  cip/4.4: IO_WQ is not implemented
  cip/4.4-rt: IO_WQ is not implemented
  cip/4.4-st: IO_WQ is not implemented
  stable/4.19: IO_WQ is not implemented
  stable/5.4: IO_WQ is not implemented
