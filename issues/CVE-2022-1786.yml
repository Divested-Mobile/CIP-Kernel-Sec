description: 'io_uring: always use original task when preparing req identity'
references:
- https://www.openwall.com/lists/oss-security/2022/05/24/4
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-1786
- https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?h=linux-5.10.y&id=29f077d070519a88a793fbc70f1e6484dc6d9e35
- https://www.openwall.com/lists/oss-security/2022/05/28/1
- https://blog.kylebot.net/2022/10/16/CVE-2022-1786/
- https://www.cve.org/CVERecord?id=CVE-2022-1786
comments:
  debian/carnil: |-
    Upstream around 5.12-rc1 drops the non-native workers, in
    particular upstream 4379bf8bd70b ("io_uring: remove
    io_identity") removes the problematic calling. Consider this as
    the fix, while overall we can say it's not an issue starting in
    5.12-rc1.
  masami: |-
    A freeing memory bug was found in io_uring module. This bug
    allow an attacker to escalate privilege.This vulnerability was
    in 5.10 and 5.11. The commit 4379bf8 was merged in
    5.12-rc1-dontuse.
reporters:
- Kyle Zeng
introduced-by:
  mainline: [500a373d731ac506612db12631ec21295c1ff360]
fixed-by:
  cip/5.10: [29f077d070519a88a793fbc70f1e6484dc6d9e35]
  cip/5.10-rt: [29f077d070519a88a793fbc70f1e6484dc6d9e35]
  mainline: [4379bf8bd70b5de6bba7d53015b0c36c57a634ee]
  stable/5.10: [29f077d070519a88a793fbc70f1e6484dc6d9e35]
  ubuntu/focal: ['version:5.4.0-9.12']
ignore:
  cip/4.19: Not affected
  cip/4.19-rt: Not affected
  cip/4.4: Not affected
  cip/4.4-rt: Not affected
  cip/4.4-st: Not affected
  stable/4.14: Not affected
  stable/4.19: Not affected
  stable/4.9: Not affected
  stable/5.4: Not affected
