description: 'fs/pipe: Deinitialize the watch_queue when pipe is freed'
references:
- https://lore.kernel.org/lkml/20220507115605.96775-1-tcs.kernel@gmail.com/T/
- https://bugzilla.redhat.com/show_bug.cgi?id=2089701
- https://bugzilla.suse.com/show_bug.cgi?id=1199904
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-1882
- https://lore.kernel.org/lkml/20220509131726.59664-1-tcs.kernel@gmail.com/
- https://lore.kernel.org/lkml/Ynl+kUGRYaovLc8q@sol.localdomain/T/
- https://ssd-disclosure.com/ssd-advisory-linux-config_watch_queue-lpe/
- https://ubuntu.com/security/notices/USN-5667-1
- https://ubuntu.com/security/notices/USN-5683-1
- https://ubuntu.com/security/notices/USN-5703-1
- https://www.cve.org/CVERecord?id=CVE-2022-1882
comments:
  debian/carnil: |-
    Introduced by db8facfc9faf ("watch_queue, pipe: Free watchqueue
    state after clearing pipe ring") 5.17-rc8 (and was backported
    to 5.16.15, 5.15.29 and 5.10.106.
    CONFIG_WATCH_QUEUE is not enabled in Debian builds.
  masami: |-
    Notification queue support to pipe is introduced by commit
    c73be61 ("pipe: Add general notification queue support")
    which was merged in 5.8-rc1. 5.7 or earlier kernels aren't
    affected.
  ubuntu/sbeattie: possibly introduced in db8facfc9fafacefe8a835 (v5.17-rc8)
reporters:
- Noam Rathaus
- Selim Enes Karaduman
introduced-by:
  cip/5.10: [d729d4e99fb85f734805ff37dd79f38e7db21c0f]
  cip/5.10-rt: [d729d4e99fb85f734805ff37dd79f38e7db21c0f]
  mainline: [db8facfc9fafacefe8a835416a6b77c838088f8b]
  stable/5.10: [d729d4e99fb85f734805ff37dd79f38e7db21c0f]
  stable/5.15: [8275b6699c6dda4d4cec748bc2e879cac532d193]
fixed-by:
  cip/5.10: [0adf21eec59040b31af113e626efd85eb153c728]
  cip/5.10-rt: [0adf21eec59040b31af113e626efd85eb153c728]
  mainline: [353f7988dd8413c47718f7ca79c030b6fb62cfe5]
  stable/5.10: [0adf21eec59040b31af113e626efd85eb153c728]
  stable/5.15: [ba3a8af8a21a81cfd0c8c689a81261caba934f97]
  stable/5.18: [49cbb4820e4f1895130755732485afb2d18508f9]
  ubuntu/focal: ['version:5.4.0-9.12']
ignore:
  cip/4.19: never
  cip/4.19-rt: never
  cip/4.4: never
  cip/4.4-rt: never
  cip/4.4-st: never
  stable/4.14: never
  stable/4.19: never
  stable/4.4: never
  stable/5.4: never
