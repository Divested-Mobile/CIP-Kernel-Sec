description: 'mm/gup: fix FOLL_FORCE COW security issue and remove FOLL_COW'
references:
- https://lore.kernel.org/linux-mm/20220808073232.8808-1-david@redhat.com/
- https://www.openwall.com/lists/oss-security/2022/08/08/1
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2590
- https://lore.kernel.org/all/20220809205640.70916-1-david@redhat.com/
- https://www.openwall.com/lists/oss-security/2022/08/15/1
- https://ubuntu.com/security/notices/USN-6071-1
- https://www.cve.org/CVERecord?id=CVE-2022-2590
comments:
  debian/carnil: |-
    Commit fixes 9ae0f87d009c ("mm/shmem: unconditionally set pte
    dirty in mfill_atomic_install_pte") in 5.16-rc1.
    David Hildenbrand reports that "Kernels before extended uffd-wp
    support and before PageAnonExclusive (< 5.19) can simply revert
    the problematic commit instead and be safe regarding
    UFFDIO_CONTINUE. A backport to v5.19 requires minor adjustments
    due to lack of vma_soft_dirty_enabled()."
    Fix is backported as well to 5.19.6 for 5.19.y
  masami: |-
    Kernel 4.4, 4.9, 4.19, 5.4, 5.10, 1.15 were not contains
    commit 9ae0f87d009c so they are not affected.
  ubuntu/sbeattie: |-
    introduced in 9ae0f87d009c ("mm/shmem: unconditionally set
      pte dirty in mfill_atomic_install_pte") (v5.16)
    from reporter: "Kernels before extended uffd-wp support and
      before PageAnonExclusive (< 5.19) can simply revert 9ae0f87d009c
      instead and be safe regarding UFFDIO_CONTINUE.
reporters:
- David Hildenbrand
introduced-by:
  mainline: [9ae0f87d009ca6c4aab2882641ddfc319727e3db]
fixed-by:
  mainline: [5535be3099717646781ce1540cf725965d680e7b]
  stable/5.19: [9def52eb10baab3b700858003d462fcf17d62873]
  ubuntu/focal: ['version:5.4.0-9.12']
ignore:
  cip/4.19: Not affected
  cip/4.19-rt: Not affected
  cip/4.4: Not affected
  cip/4.4-rt: Not affected
  cip/4.4-st: Not affected
  cip/5.10: Not affected
  cip/5.10-rt: Not affected
  stable/4.14: Not affected
  stable/4.19: Not affected
  stable/4.9: Not affected
  stable/5.10: Not affected
  stable/5.15: Not affected
  stable/5.4: Not affected
