description: 'fs: fix UAF/GPF bug in nilfs_mdt_destroy'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-2978
- https://lore.kernel.org/linux-fsdevel/20220816040859.659129-1-dzm91@hust.edu.cn/T/#u
comments:
  masami: |-
    A freeing uninitialized memory bug was found in
    nilfs_mdt_destroy(). This bug occurs in an error path.
    If allocating memory for inode is failed in inode_init_always(),
    it returns ENOMEM. Then nilfs_mdt_destroy() is called which
    frees uninialized data.
    It looks 4.4 kernel is affected by this bug too.
