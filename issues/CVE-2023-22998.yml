description: 'drm/virtio: Fix NULL vs IS_ERR checking in virtio_gpu_object_shmem_init'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-22998
- https://git.kernel.org/linus/c24968734abfed81c8f93dc5f44a7b7a9aecadfa
- https://git.kernel.org/linus/64b88afbd92fbf434759d1896a7cf705e1c00e79
- https://cdn.kernel.org/pub/linux/kernel/v6.x/ChangeLog-6.0.3
- https://github.com/torvalds/linux/commit/c24968734abfed81c8f93dc5f44a7b7a9aecadfa
- https://www.cve.org/CVERecord?id=CVE-2023-22998
comments:
  debian/bwh: |-
    Introduced in 5.5 by commit c66df701e783 "drm/virtio: switch
    from ttm to gem shmem helpers".
  masami: |-
    This bug was introduced by commit 2f2aa13 ("drm/virtio: move virtio_gpu_mem_entry
    initialization to new function") in 5.7-rc1.
    Commit c249687 ("drm/virtio: Fix NULL vs IS_ERR checking in virtio_gpu_object_shmem_init")
    changes return value from -EINVAL to PTR_ERR(shmem->pages) but it needed to set NULL to
    shmem->pages. Commit 64b88af ("drm/virtio: Correct drm_gem_shmem_get_sg_table()
    error handling") does it.
introduced-by:
  mainline: [2f2aa13724d56829d910b2fa8e80c502d388f106]
fixed-by:
  cip/5.10: [0a4181b23acf53e9c95b351df6a7891116b98f9b, 87c647def389354c95263d6635c62ca0de7d12ca]
  cip/5.10-rt: [0a4181b23acf53e9c95b351df6a7891116b98f9b, 87c647def389354c95263d6635c62ca0de7d12ca]
  mainline: [c24968734abfed81c8f93dc5f44a7b7a9aecadfa, 64b88afbd92fbf434759d1896a7cf705e1c00e79]
  stable/5.10: [0a4181b23acf53e9c95b351df6a7891116b98f9b, 87c647def389354c95263d6635c62ca0de7d12ca]
  stable/5.15: [72893aadc0017f0f2998b33e7fa5e6b3a3a72d02, 60630834fad38252369bf4a351a03b75b76786e3]
  ubuntu/focal: ['version:5.4.0-9.12']
ignore:
  cip/4.19: Not affected
  cip/4.19-rt: Not affected
  cip/4.4: Not affected
  cip/4.4-rt: Not affected
  cip/4.4-st: Not affected
  stable/4.14: Not affected
  stable/4.19: Not affected
  stable/5.4: Not affected
