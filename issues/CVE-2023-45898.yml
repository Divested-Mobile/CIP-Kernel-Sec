description: 'ext4: fix slab-use-after-free in ext4_es_insert_extent()'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-45898
- https://git.kernel.org/linus/768d612f79822d30a1e7d132a4d4b05337ce42ec
- https://github.com/torvalds/linux/commit/768d612f79822d30a1e7d132a4d4b05337ce42ec
- https://lore.kernel.org/lkml/aa03f191-445c-0d2e-d6d7-0a3208d7df7a@huawei.com/T/
- https://www.spinics.net/lists/stable-commits/msg317086.html
- https://lkml.org/lkml/2023/8/13/477
- https://cdn.kernel.org/pub/linux/kernel/v6.x/ChangeLog-6.5.4
- https://lore.kernel.org/lkml/aa03f191-445c-0d2e-d6d7-0a3208d7df7a%40huawei.com/T/
- https://lore.kernel.org/lkml/CALcu4raD4h9coiyEBL4Bm0zjDwxC2CyPiTwsP3zFuhot6y9Beg@mail.gmail.com/
- https://lore.kernel.org/all/20230815070808.3377171-1-libaokun1@huawei.com/
- https://bugzilla.redhat.com/show_bug.cgi?id=2245711
- https://bugzilla.suse.com/show_bug.cgi?id=1216262
- https://ubuntu.com/security/notices/USN-6536-1
- https://ubuntu.com/security/notices/USN-6537-1
- https://ubuntu.com/security/notices/USN-6573-1
- https://www.cve.org/CVERecord?id=CVE-2023-45898
comments:
  debian/carnil: |-
    Commit fixes 2a69c450083d ("ext4: using nofail preallocation in
    ext4_es_insert_extent()") in 6.5-rc1.
    The breaking commit was later on backported as well to
    5.10.203, 5.15.141 and 6.1.65 but along with the fix.
  masami: |-
    Introduced by commit 2a69c45 ("ext4: using nofail preallocation
    in ext4_es_insert_extent()") in 6.5-rc1. Fixed in 6.6-rc1.
  ubuntu/rodrigo-zaiden: |-
    first publication of USN-6536-1 wrongly announced that
     linux-azure on mantic fixed this issue in version 6.5.0-1009.9. It was
     fixed with USN-6573-1.
reporters:
- Yikebaer Aizezi
introduced-by:
  cip/5.10: [5527898c6a9f5c77ff9f5eebb2f50a57ccf1be1b]
  cip/5.10-rt: [5527898c6a9f5c77ff9f5eebb2f50a57ccf1be1b]
  cip/6.1: [9164978bce4965ad88124edd1e92117ea79693bc]
  cip/6.1-rt: [9164978bce4965ad88124edd1e92117ea79693bc]
  mainline: [2a69c450083db164596c75c0f5b4d9c4c0e18eba]
  stable/5.10: [5527898c6a9f5c77ff9f5eebb2f50a57ccf1be1b]
  stable/5.15: [859893f61906a4d3ef963ce7a7f27100d818edd1]
  stable/5.4: [15a84cf4c78531224aea101c6d965b7c1cdeba01]
  stable/6.1: [9164978bce4965ad88124edd1e92117ea79693bc]
  ubuntu/focal: [907dae3179f5e4be1bd554ebdc535fbc8ef96ed0]
fixed-by:
  cip/5.10: [10341e77e49fab3e095ae548ceb39335741b8fe9]
  cip/5.10-rt: [10341e77e49fab3e095ae548ceb39335741b8fe9]
  cip/6.1: [8384d8c5cc398cf59ab829d71d750752002f0a21]
  cip/6.1-rt: [8384d8c5cc398cf59ab829d71d750752002f0a21]
  mainline: [768d612f79822d30a1e7d132a4d4b05337ce42ec]
  stable/5.10: [10341e77e49fab3e095ae548ceb39335741b8fe9]
  stable/5.15: [e33eb4997585f2e17513e3f2923080dc08cbb00b]
  stable/5.4: [70edeedd795a634fdd99e757c7931b9e81686560]
  stable/6.1: [8384d8c5cc398cf59ab829d71d750752002f0a21]
  stable/6.5: [c15bf3330a9e3c01b23e59899a6a02432a62ddc3]
  ubuntu/focal: ['version:5.4.0-9.12']
