description: 'btrfs: do not ASSERT() if the newly created subvolume already got read'
references:
- https://lore.kernel.org/lkml/CALGdzuo6awWdau3X=8XK547x2vX_-VoFmH1aPsqosRTQ5WzJVA%40mail.gmail.com/
- https://lore.kernel.org/all/6a80cb4b32af89787dadee728310e5e2ca85343f.1705741883.git.wqu%40suse.com/
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-23850
- https://bugzilla.redhat.com/show_bug.cgi?id=2260044
- https://bugzilla.suse.com/show_bug.cgi?id=1219126
- https://ubuntu.com/security/notices/USN-6724-1
- https://ubuntu.com/security/notices/USN-6725-1
- https://www.cve.org/CVERecord?id=CVE-2024-23850
- https://ubuntu.com/security/notices/USN-6724-2
- https://ubuntu.com/security/notices/USN-6725-2
comments:
  debian/bwh: Fixed as well in 6.6.18 and 6.7.6.
  debian/carnil: |-
    Commit fixes 2dfb1e43f57d ("btrfs: preallocate anon block
    device at first phase of snapshot creation") in 5.9-rc1 (and
    backported to 5.8.3)
  masami: |-
    This bug was introduced by commit 2dfb1e4 ("btrfs: preallocate
    anon block device at first phase of snapshot creation") in
    5.9-rc1. The commit 2dfb1e4 is not backported to before 5.9
    so these kernels are not affected.
reporters:
- Chenyuan Yang
introduced-by:
  mainline: [2dfb1e43f57dd3aeaa66f7cf05d068db2d4c8788]
  ubuntu/groovy: [050d2f34aa1fc2da1cf2a4e3eb4807e8366a5b09]
fixed-by:
  cip/5.10: [3f5d47eb163bceb1b9e613c9003bae5fefc0046f]
  cip/6.1: [66b317a2fc45b2ef66527ee3f8fa08fb5beab88d]
  cip/6.1-rt: [66b317a2fc45b2ef66527ee3f8fa08fb5beab88d]
  mainline: [e03ee2fe873eb68c1f9ba5112fee70303ebf9dfb]
  stable/5.10: [3f5d47eb163bceb1b9e613c9003bae5fefc0046f]
  stable/5.15: [e31546b0f34af21738c4ceac47d662c00ee6382f]
  stable/6.1: [66b317a2fc45b2ef66527ee3f8fa08fb5beab88d]
  stable/6.6: [833775656d447c545133a744a0ed1e189ce61430]
  stable/6.7: [5a172344bfdabb46458e03708735d7b1a918c468]
  ubuntu/focal: ['version:5.4.0-9.12']
