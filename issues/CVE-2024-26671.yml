description: 'blk-mq: fix IO hang from sbitmap wakeup race'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-26671
- https://git.kernel.org/stable/c/9525b38180e2753f0daa1a522b7767a2aa969676
- https://git.kernel.org/stable/c/ecd7744a1446eb02ccc63e493e2eb6ede4ef1e10
- https://git.kernel.org/stable/c/7610ba1319253225a9ba8a9d28d472fc883b4e2f
- https://git.kernel.org/stable/c/89e0e66682e1538aeeaa3109503473663cd24c8b
- https://git.kernel.org/stable/c/1d9c777d3e70bdc57dddf7a14a80059d65919e56
- https://git.kernel.org/stable/c/6d8b01624a2540336a32be91f25187a433af53a0
- https://git.kernel.org/stable/c/f1bc0d8163f8ee84a8d5affdf624cfad657df1d2
- https://git.kernel.org/stable/c/5266caaf5660529e3da53004b8b7174cab6374ed
- https://lore.kernel.org/linux-cve-announce/2024040219-CVE-2024-26671-2543@gregkh/
- https://git.kernel.org/linus/5266caaf5660529e3da53004b8b7174cab6374ed
- https://www.cve.org/CVERecord?id=CVE-2024-26671
- https://ubuntu.com/security/notices/USN-6765-1
- https://ubuntu.com/security/notices/USN-6766-1
- https://ubuntu.com/security/notices/USN-6767-1
- https://ubuntu.com/security/notices/USN-6767-2
- https://ubuntu.com/security/notices/USN-6766-2
- https://ubuntu.com/security/notices/USN-6766-3
- https://ubuntu.com/security/notices/USN-6795-1
- https://ubuntu.com/security/notices/USN-6818-1
- https://ubuntu.com/security/notices/USN-6819-1
- https://ubuntu.com/security/notices/USN-6818-2
- https://ubuntu.com/security/notices/USN-6828-1
- https://ubuntu.com/security/notices/USN-6819-2
- https://ubuntu.com/security/notices/USN-6819-3
- https://ubuntu.com/security/notices/USN-6818-3
- https://ubuntu.com/security/notices/USN-6818-4
comments:
  cip/cip-kernel-sec: Introduced commit is not determined.Fixed in v6.8-rc1.
  cip/masami: "The blk_mq_mark_tag_wait() was renamed from blk_mq_dispatch_wait_add()\
    \ by \ncommit f906a6a0f (\"blk-mq: improve tag waiting setup for non-shared tags\"\
    ) \nin 4.15-rc1. The blk_mq_dispatch_wait_add() was introduced by commit da55f2cc\
    \ \n(\"blk-mq: use sbq wait queues instead of restart for driver tags\") in 4.11-rc1.\n\
    So, Linux 4.4 may not be affected."
  debian/carnil: First introducing commit could not be determined.
  ubuntu/rodrigo-zaiden: |-
    USN-6765-1 for linux-oem-6.5 wrongly stated that this CVE
     was fixed in version 6.5.0-1022.23. The mentioned notice was revoked and
     the state of the fix for linux-oem-6.5 was recovered to the previous
     state.
fixed-by:
  cip/4.19: [9525b38180e2753f0daa1a522b7767a2aa969676]
  cip/4.19-rt: [9525b38180e2753f0daa1a522b7767a2aa969676]
  cip/5.10: [7610ba1319253225a9ba8a9d28d472fc883b4e2f]
  cip/5.10-rt: [7610ba1319253225a9ba8a9d28d472fc883b4e2f]
  cip/6.1: [1d9c777d3e70bdc57dddf7a14a80059d65919e56]
  cip/6.1-rt: [1d9c777d3e70bdc57dddf7a14a80059d65919e56]
  mainline: [5266caaf5660529e3da53004b8b7174cab6374ed]
  stable/4.19: [9525b38180e2753f0daa1a522b7767a2aa969676]
  stable/5.10: [7610ba1319253225a9ba8a9d28d472fc883b4e2f]
  stable/5.15: [89e0e66682e1538aeeaa3109503473663cd24c8b]
  stable/5.4: [ecd7744a1446eb02ccc63e493e2eb6ede4ef1e10]
  stable/6.1: [1d9c777d3e70bdc57dddf7a14a80059d65919e56]
  stable/6.6: [6d8b01624a2540336a32be91f25187a433af53a0]
  stable/6.7: [f1bc0d8163f8ee84a8d5affdf624cfad657df1d2]
  ubuntu/focal: [41ad0ea33cb5e5ad796efafc8ae68918cf259773]
ignore:
  cip/4.4: Vulnerable function is not present
  cip/4.4-rt: Vulnerable function is not present
  cip/4.4-st: Vulnerable function is not present
