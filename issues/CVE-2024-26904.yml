description: 'btrfs: fix data race at btrfs_use_block_rsv() when accessing block reserve'
references:
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-26904
- https://git.kernel.org/stable/c/2daa2a8e895e6dc2395f8628c011bcf1e019040d
- https://git.kernel.org/stable/c/ab1be3f1aa7799f99155488c28eacaef65eb68fb
- https://git.kernel.org/stable/c/f6d4d29a12655b42a13cec038c2902bb7efc50ed
- https://git.kernel.org/stable/c/7e9422d35d574b646269ca46010a835ca074b310
- https://git.kernel.org/stable/c/c7bb26b847e5b97814f522686068c5628e2b3646
- https://lore.kernel.org/linux-cve-announce/2024041746-CVE-2024-26904-e3a8@gregkh/
comments:
  cip/cip-kernel-sec: Introduced commit is not determined.Fixed in v6.8-rc7.
  cip/masami: |-
    It seems as if all stable kernels are affected. The btrfs_use_block_rsv() 
    was renamed from use_block_rsv() by commit 67f9c220 ("btrfs: migrate 
    the global_block_rsv helpers to block-rsv.c") in 5.3-rc1.
  debian/carnil: First introducing commit could not be determined.
fixed-by:
  cip/6.1: [ab1be3f1aa7799f99155488c28eacaef65eb68fb]
  cip/6.1-rt: [ab1be3f1aa7799f99155488c28eacaef65eb68fb]
  mainline: [c7bb26b847e5b97814f522686068c5628e2b3646]
  stable/5.4: [2daa2a8e895e6dc2395f8628c011bcf1e019040d]
  stable/6.1: [ab1be3f1aa7799f99155488c28eacaef65eb68fb]
  stable/6.6: [f6d4d29a12655b42a13cec038c2902bb7efc50ed]
