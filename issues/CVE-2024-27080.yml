description: 'btrfs: fix race when detecting delalloc ranges during fiemap'
references:
- https://www.cve.org/CVERecord?id=CVE-2024-27080
- https://git.kernel.org/stable/c/49d640d2946c35a17b051d54171a032dd95b0f50
- https://git.kernel.org/stable/c/ced63fffd63072c0ca55d5a451010d71bf08c0b3
- https://git.kernel.org/stable/c/978b63f7464abcfd364a6c95f734282c50f3decf
- https://lore.kernel.org/linux-cve-announce/2024050135-CVE-2024-27080-46f0@gregkh/
comments:
  cip/cip-kernel-sec: |-
    Introduced by commit b0ad381 ("btrfs: fix deadlock with fiemap and extent locking") in v6.8-rc6.
    Fixed in v6.9-rc1.
  debian/carnil: |-
    Introduced in b0ad381fa769 ("btrfs: fix deadlock with fiemap and extent
    locking"). Vulnerable versions: 6.6.24 6.7.12 6.8-rc6.
introduced-by:
  mainline: [b0ad381fa7690244802aed119b478b4bdafc31dd]
  stable/6.6: [ded566b4637f1b6b4c9ba74e7d0b8493e93f19cf]
fixed-by:
  mainline: [978b63f7464abcfd364a6c95f734282c50f3decf]
  stable/6.6: [49d640d2946c35a17b051d54171a032dd95b0f50]
  stable/6.8: [ced63fffd63072c0ca55d5a451010d71bf08c0b3]
