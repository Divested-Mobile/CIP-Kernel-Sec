description: 'block: fix q->blkg_list corruption during disk rebind'
references:
- https://www.cve.org/CVERecord?id=CVE-2024-35974
- https://git.kernel.org/stable/c/740ffad95ca8033bd6e080ed337655b13b4d38ac
- https://git.kernel.org/stable/c/858c489d81d659af17a4d11cfaad2afb42e47a76
- https://git.kernel.org/stable/c/8b8ace080319a866f5dfe9da8e665ae51d971c54
- https://lore.kernel.org/linux-cve-announce/2024052024-CVE-2024-35974-7008@gregkh/
comments:
  cip/cip-kernel-sec: |-
    Introduced by commit f1c006f ("blk-cgroup: synchronize pd_free_fn() from blkg_free_workfn() and blkcg_deactivate_policy()") in v6.3-rc1.
    Introduced by commit 1059699 ("block: move blkcg initialization/destroy into disk allocation/release handler") in v5.18-rc1.
    Fixed in v6.9-rc4.
  debian/carnil: |-
    Introduced in f1c006f1c685 ("blk-cgroup: synchronize pd_free_fn() from
    blkg_free_workfn() and blkcg_deactivate_policy()")
    1059699f87eb ("block: move blkcg initialization/destroy into disk
    allocation/release handler"). Vulnerable versions: 5.18-rc1.
introduced-by:
  cip/6.1: [81c1188905f88b77743d1fdeeedfc8cb7b67787d, 1059699f87eb0b3aa9d574b91a572d534897134a]
  cip/6.1-rt: [81c1188905f88b77743d1fdeeedfc8cb7b67787d, 1059699f87eb0b3aa9d574b91a572d534897134a]
  mainline: [f1c006f1c6850c14040f8337753a63119bba39b9, 1059699f87eb0b3aa9d574b91a572d534897134a]
  stable/6.1: [81c1188905f88b77743d1fdeeedfc8cb7b67787d, 1059699f87eb0b3aa9d574b91a572d534897134a]
fixed-by:
  mainline: [8b8ace080319a866f5dfe9da8e665ae51d971c54]
  stable/6.6: [740ffad95ca8033bd6e080ed337655b13b4d38ac]
  stable/6.8: [858c489d81d659af17a4d11cfaad2afb42e47a76]
