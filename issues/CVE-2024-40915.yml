description: 'riscv: rewrite __kernel_map_pages() to fix sleeping in invalid context'
references:
- https://www.cve.org/CVERecord?id=CVE-2024-40915
- https://git.kernel.org/stable/c/919f8626099d9909b9a9620b05e8c8ab06581876
- https://git.kernel.org/stable/c/8661a7af04991201640863ad1a0983173f84b5eb
- https://git.kernel.org/stable/c/d5257ceb19d92069195254866421f425aea42915
- https://git.kernel.org/stable/c/fb1cf0878328fe75d47f0aed0a65b30126fcefc4
- https://lore.kernel.org/linux-cve-announce/2024071211-CVE-2024-40915-ba8c@gregkh/
comments:
  cip/cip-kernel-sec: |-
    Introduced by commit 5fde3db ("riscv: add ARCH_SUPPORTS_DEBUG_PAGEALLOC support") in v5.7-rc1.
    Fixed in v6.10-rc1.
  debian/carnil: |-
    Introduced in 5fde3db5eb02 ("riscv: add ARCH_SUPPORTS_DEBUG_PAGEALLOC
    support"). Vulnerable versions: 5.7-rc1.
introduced-by:
  mainline: [5fde3db5eb028b95aeefa1ab192d36800414e8b8]
fixed-by:
  cip/6.1: [919f8626099d9909b9a9620b05e8c8ab06581876]
  cip/6.1-rt: [919f8626099d9909b9a9620b05e8c8ab06581876]
  mainline: [fb1cf0878328fe75d47f0aed0a65b30126fcefc4]
  stable/6.1: [919f8626099d9909b9a9620b05e8c8ab06581876]
  stable/6.6: [8661a7af04991201640863ad1a0983173f84b5eb]
  stable/6.9: [d5257ceb19d92069195254866421f425aea42915]
